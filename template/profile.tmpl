<html>
<head>
<title>{{.IP}}'s profile</title>
<style type="text/css">
/* copy from http://www.w3school.com.cn/tiy/t.asp?f=csse_table_fancy */
#profile
  {
  font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse:collapse;
  }

#profile td, #profile th 
  {
  font-size:1em;
  border:1px solid #98bf21;
  padding:3px 7px 2px 7px;
  min-width:100px;
  }

#profile th 
  {
  font-size:1.1em;
  text-align:left;
  padding-top:5px;
  padding-bottom:4px;
  background-color:#A7C942;
  color:#ffffff;
  }

#profile tr.alt td 
  {
  color:#000000;
  background-color:#EAF2D3;
  }
</style>

<script type="text/javascript">

function appendCmd(cmd)
{
  var cmdBox = document.getElementById('CommandBoxId');
  cmdBox.value = cmdBox.value + cmd + "\n";
}
</script>
</head>

<body>
<p>配置名字：{{.Name}}</p>
<p>当前作用 IP：{{.IP}}</p>
<p>操作者 IP：{{.Owner}}</p>
<hr/>
<a href="/profile/{{.IP}}/restart" target="_blank" title="清除超时、缓存等">重启客户端状态</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="/profile/{{.IP}}/history" target="_blank" title="查看域名查询、HTTP 访问等日志">查看日志</a>
<hr/>
<table id="profile">
<tr>
<th>编辑</th>
<th>URL 匹配模式</th>
<th>代理行为</th>
<th>延时设定</th>
</tr>
{{range .Urls}}
<tr{{if .Even}} class="alt"{{end}}>
<td><input type="button" value="修改" onclick="appendCmd('{{.Edit}}');"/>&nbsp;<input type="button" value="删除" onclick="appendCmd('{{.Delete}}');"/></td>
<td style="min-width:500px;">{{.Pattern}}</td>
<td>{{.Action}}</td>
<td>{{.Delay}}</td>
</tr>
{{end}}
</table>
<hr/>

<table id="profile">
<tr>
<th>编辑</th>
<th>域名</th>
<th>查询行为</th>
<th>目标 IP</th>
</tr>
{{range .Domains}}
<tr{{if .Even}} class="alt"{{end}}>
<td><input type="button" value="修改" onclick="appendCmd('{{.Edit}}');"/>&nbsp;<input type="button" value="删除" onclick="appendCmd('{{.Delete}}');"/></td>
<td style="min-width:500px;">{{.Domain}}</td>
<td>{{.Action}}</td>
<td>{{.IP}}</td>
</tr>
{{end}}
</table>
<hr/>

<form action="/profile/{{.Path}}" method="post">
<h2>命令（<a href="/profile/commands" target="_blank">说明</a>）：</h2>
<textarea rows="10" cols="80" id="CommandBoxId" name="cmd"></textarea>
<input type="submit" value="执行命令"/>
</form>

<a href="/profile/{{.Path}}/export" target="_blank">导出命令</a>
<hr/>

<h3>命令用例：</h3>
<ul>
<li><button type="button" onclick="appendCmd('delay 1.5s g.cn/search key=hello');">设置延时 1.5 秒：<b>delay 1.5s g.cn/search key=hello</b></button>
<li><button type="button" onclick="appendCmd('delay drop 15m g.cn/search key=hello');">设置 15 分钟无法访问：<b>delay drop 15m g.cn/search key=hello</b></button>
<li><button type="button" onclick="appendCmd('proxy cache g.cn/search key=hello');">设置代理模式：<b>proxy cache g.cn/search key=hello</b></button>
<li><button type="button" onclick="appendCmd('proxy drop 404 g.cn/search key=hello');">设置 URL 被 404：<b>proxy drop 404 g.cn/search key=hello</b></button>
<li><button type="button" onclick="appendCmd('delete g.cn/search key=hello');">删除某条设置：<b>delete g.cn/search key=hello</b></button>
</ul>
</body>
</html>
